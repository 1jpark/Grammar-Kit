{
  classHeader="//header.txt"
  parserClass="PsiGen"
  stubParserClass="PsiGenUtil"
  extends(".*expr")="expr"
  extends("root_.")="root"
}
root ::= root_a | root_b | root_c | root_d
external root_a ::= parseGrammar grammar_element
root_b ::= <<parseGrammar grammar_element>>
root_c ::= <<blockOf grammar_element>>
root_d ::= <<listOf grammar_element>>

meta blockOf ::= <<p>> +
private meta listOf ::= <<p>> +
grammar_element ::= expr
expr ::= a_expr
private a_expr ::= b_expr plus_expr *
left plus_expr ::= '+' expr {extends="expr"}
private b_expr ::= id_expr mul_expr *
left mul_expr ::= '*' expr {extends="expr"}
private id_expr ::= special_ref | ref_expression | literal

ref_expression ::= ref_expr qref_expr * {extends="expr"}
ref_expr ::= id  {extends="expr"}
left qref_expr ::= '.' id {extends="ref_expr"}

literal ::= number {extends="expr"}
special_ref ::= id OF ref_expression {extends="qref_expr"}