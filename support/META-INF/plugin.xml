<idea-plugin url="https://github.com/JetBrains/Grammar-Kit" version="2">
  <id>org.jetbrains.idea.grammar</id>
  <version>1.0.7</version>
  <vendor email="gregory.shrago@jetbrains.com" logo="">Gregory Shrago</vendor>
  <idea-version since-build="116.108" until-build=""/>

  <name>Grammar-Kit</name>
  <description>Edit, manipulate, analyze BNF grammars and generate readable parser/PSI code</description>

  <depends optional="true" config-file="plugin-java.xml">com.intellij.modules.java</depends>
  <depends optional="true" config-file="plugin-uml.xml">com.intellij.diagram</depends>

  <change-notes>
    <![CDATA[
    <p>1.0.7</p>
    <ul>
        <li>Attribute pattern navigation & inspection</li>
        <li>Short error messages generation instead of long token lists</li>
        <li>Token sequence completion</li>
        <li>Standalone invocation (for ant integration & etc.)</li>
    </ul>
    <p>1.0.6</p>
    <ul>
        <li>Grammar diagram (UML support plugin required)</li>
        <li>Dedicated "tokens" attribute</li>
        <li>Minor fixes</li>
    </ul>
    <p>1.0.5</p>
    <ul>
        <li>Generator: PSI visitor generation</li>
        <li>PSI: better children discovery (esp. for left rules)</li>
        <li>PSI: user methods and method mixins</li>
        <li>PSI: <b>fake</b> rules</li>
        <li>Performance: adapted PsiBuilder</li>
    </ul>
    <p>1.0.4</p>
    <ul>
        <li>Bug fixes and performance</li>
    </ul>
    <p>1.0.3</p>
    <ul>
        <li>Improved PSI generation ("extends" and "elementType" attributes handling)</li>
        <li>Configurable FIRST-based parser optimization</li>
    </ul>
    <p>1.0.2</p>
    <ul>
        <li>Error recovery: extended "pinning" (see documentation)</li>
        <li>Pin marker annotator</li>
        <li>Configurable colors (Settings/Editor/Colors and Fonts/Grammar)</li>
        <li>Parser-based context-aware keyword completion (sample)</li>
        <li>Language injection in string literals (sample)</li>
        <li>Performance improvement & other fixes</li>
    </ul>
    <p>1.0.1</p>
    <ul>
        <li>Left-recursion detection</li>
        <li>Recursive meta rules handling fixes</li>
    </ul>
    <p>1.0:</p>
    <ul>
        <li>Simple unused rules highlighting</li>
        <li>Rename refactoring, find usages of rules & attributes</li>
        <li>PsiBuilder-based PEG parser & PSI class hierarchy generation</li>
        <li>BNF files editing, highlighting, navigation and completion</li>
        <li>Quick structure view, go to related file action</li>
        <li>Refactorings: inline rule, introduce rule</li>
        <li>Intentions: flip choice branches</li>
        <li>FIRST and NEXT token sets calculation (avail. in Quick Documentation)</li>
    </ul>
    ]]>
  </change-notes>

  <extensions defaultExtensionNs="com.intellij">
    <errorHandler implementation="com.intellij.diagnostic.ITNReporter"/>

    <fileTypeFactory implementation="org.intellij.grammar.BnfFileTypeFactory"/>
    <lang.parserDefinition language="BNF" implementationClass="org.intellij.grammar.BnfParserDefinition"/>
    <annotator language="BNF" implementationClass="org.intellij.grammar.editor.BnfAnnotator"/>
    <annotator language="BNF" implementationClass="org.intellij.grammar.editor.BnfPinMarkerAnnotator"/>
    <lang.syntaxHighlighterFactory key="BNF" implementationClass="org.intellij.grammar.editor.BnfSyntaxHighlighterFactory"/>
    <elementDescriptionProvider implementation="org.intellij.grammar.BnfDescriptionProvider"/>
    <lang.findUsagesProvider language="BNF" implementationClass="org.intellij.grammar.BnfFindUsagesProvider"/>
    <lang.braceMatcher language="BNF" implementationClass="org.intellij.grammar.BnfBraceMatcher"/>
    <lang.psiStructureViewFactory language="BNF" implementationClass="org.intellij.grammar.BnfStructureViewFactory"/>
    <codeInsight.lineMarkerProvider language="BNF" implementationClass="org.intellij.grammar.BnfRuleLineMarkerProvider"/>
    <lang.commenter language="BNF" implementationClass="org.intellij.grammar.BnfCommenter"/>
    <completion.contributor language="BNF" implementationClass="org.intellij.grammar.BnfCompletionContributor" order="before javaClassName"/>
    <lang.elementManipulator forClass="org.intellij.grammar.psi.impl.BnfStringLiteralExpressionImpl"
                             implementationClass="org.intellij.grammar.psi.impl.BnfStringManipulator"/>
    <extendWordSelectionHandler implementation="org.intellij.grammar.editor.BnfWordSelectioner"/>

    <lang.refactoringSupport language="BNF" implementationClass="org.intellij.grammar.refactor.BnfRefactoringSupportProvider"/>
    <inlineActionHandler implementation="org.intellij.grammar.refactor.BnfInlineRuleActionHandler"/>

    <lang.unwrapDescriptor language="BNF" implementationClass="org.intellij.grammar.refactor.BnfUnwrapDescriptor"/>

    <lang.foldingBuilder language="BNF" implementationClass="org.intellij.grammar.BnfFoldingBuilder"/>

    <documentationProvider implementation="org.intellij.grammar.BnfDocumentationProvider"/>

    <localInspection language="BNF" shortName="BnfSuspiciousTokenInspection" displayName="Suspicious token" groupName="Grammar Inspections"
                     enabledByDefault="true" level="WARNING" implementationClass="org.intellij.grammar.inspection.BnfSuspiciousTokenInspection"/>
    <localInspection language="BNF" shortName="BnfLeftRecursionInspection" displayName="Left recursion" groupName="Grammar Inspections"
                     enabledByDefault="true" level="WARNING" implementationClass="org.intellij.grammar.inspection.BnfLeftRecursionInspection"/>
    <localInspection language="BNF" shortName="BnfDuplicateRuleInspection" displayName="Duplicate rule" groupName="Grammar Inspections"
                     enabledByDefault="true" level="WARNING" implementationClass="org.intellij.grammar.inspection.BnfDuplicateRuleInspection"/>
    <localInspection language="BNF" shortName="BnfIdenticalChoiceBranchesInspection" displayName="Identical choice branches"
                     groupName="Grammar Inspections" enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.inspection.BnfIdenticalChoiceBranchesInspection"/>
    <localInspection language="BNF" shortName="BnfUnreachableChoiceBranchInspection" displayName="Unreachable choice branch"
                     groupName="Grammar Inspections" enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.inspection.BnfUnreachableChoiceBranchInspection"/>

    <colorSettingsPage implementation="org.intellij.grammar.editor.BnfColorSettingsPage"/>
    <quoteHandler fileType="Grammar" className="org.intellij.grammar.editor.BnfQuoteHandler"/>

    <intentionAction>
      <className>org.intellij.grammar.intention.BnfFlipChoiceIntention</className>
      <category>Grammar</category>
    </intentionAction>
  </extensions>
  <project-components>
    <component>
      <implementation-class>org.intellij.grammar.BnfUnusedRulePassFactory</implementation-class>
      <skipForDefaultProject/>
    </component>
  </project-components>
  <actions>
    <action id="grammar.Generate" class="org.intellij.grammar.actions.GenerateAction" text="Generate Parser Code">
      <add-to-group group-id="ToolsMenu" anchor="before" relative-to-action="com.intellij.tools.ExternalToolsGroup"/>
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
      <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
      <keyboard-shortcut keymap="$default" first-keystroke="control shift G"/>
    </action>
    <action id="grammars.IntroduceRule" class="org.intellij.grammar.refactor.BnfIntroduceRuleAction" text="Introduce Rule"
            description="Introduce Rule">
      <add-to-group group-id="RefactoringMenu" anchor="first"/>
      <keyboard-shortcut keymap="$default" first-keystroke="control alt R"/>
    </action>
    <!--<action id="Grammars.ConvertFromRailRoad" class="org.intellij.grammar.actions.BnfConvertFromRailRoadAction" text="Convert From Railroad Diagram"-->
            <!--description="Convert From Railroad Diagram">-->
      <!--<add-to-group group-id="ToolsMenu" anchor="before" relative-to-action="com.intellij.tools.ExternalToolsGroup"/>-->
      <!--<add-to-group group-id="EditorPopupMenu" anchor="last"/>-->
      <!--<add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>-->
      <!--<keyboard-shortcut keymap="$default" first-keystroke="control shift D"/>-->
    <!--</action>-->
  </actions>
</idea-plugin>
